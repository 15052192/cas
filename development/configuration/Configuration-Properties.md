---
layout: default
title: CAS Properties
category: Configuration
---

{% include variables.html %}

## Custom Settings

The following settings could be used to extend CAS with arbitrary configuration keys and values:

```properties
# cas.custom.properties.[property-name]=[property-value]
```

## Cloud Configuration Bus

CAS uses the Spring Cloud Bus to manage configuration in a distributed deployment. Spring Cloud Bus links nodes of a
distributed system with a lightweight message broker.

```properties
# spring.cloud.bus.enabled=false
# spring.cloud.bus.refresh.enabled=true
# spring.cloud.bus.env.enabled=true
# spring.cloud.bus.destination=CasCloudBus
# spring.cloud.bus.ack.enabled=true
```

To learn more about this topic, [please review this guide](Configuration-Management.html).

### RabbitMQ

Broadcast CAS configuration updates to other nodes in the cluster
via [RabbitMQ](http://docs.spring.io/spring-cloud-stream/docs/current/reference/htmlsingle/#_rabbitmq_binder).

```properties
# spring.rabbitmq.host=
# spring.rabbitmq.port=
# spring.rabbitmq.username=
# spring.rabbitmq.password=

# Or all of the above in one line
# spring.rabbitmq.addresses=
```

### Kafka

Broadcast CAS configuration updates to other nodes in the cluster
via [Kafka](http://docs.spring.io/spring-cloud-stream/docs/current/reference/htmlsingle/#_apache_kafka_binder).

```properties
# spring.cloud.stream.bindings.output.content-type=application/json
# spring.cloud.stream.kafka.binder.zkNodes=...
# spring.cloud.stream.kafka.binder.brokers=...
```



## CAS Server

Identify the CAS server. `name` and `prefix` are always required settings.

A CAS host is automatically appended to the ticket ids generated by CAS.
If none is specified, one is automatically detected and used by CAS.

```properties
# cas.server.name=https://cas.example.org:8443
# cas.server.prefix=https://cas.example.org:8443/cas 
# cas.server.scope=example.org
# cas.host.name=
```

## Session replication

Control aspects of session replication for certain CAS features, such as OAuth or OpenID Connect,
allowing session and authentication profile data to be kept with the client as a cookie.

{% include {{ version }}/cookie-configuration.md configKey="cas.session-replication.cookie" %}

```properties
# cas.session-replication.auto-configure-cookie-path=true
```

## CAS Banner

On startup, CAS will display a banner along with some diagnostics info.
In order to skip this step and summarize, set the system property `-DCAS_BANNER_SKIP=true`.

### Update Check

CAS may also be conditionally configured to report, as part of the 
banner, whether a newer CAS release is available for an upgrade.
This check is off by default and may be enabled with a system property of `-DCAS_UPDATE_CHECK_ENABLED=true`.



## Web Application Session

Control the CAS web application session behavior
as it's treated by the underlying servlet container engine.

```properties
# server.servlet.session.timeout=PT30S
# server.servlet.session.cookie.http-only=true
# server.servlet.session.tracking-modes=COOKIE
```


## Authentication Attributes

Set of authentication attributes that are retrieved by the principal resolution process,
typically via some component of [Person Directory](../integration/Attribute-Resolution.html)
from a number of attribute sources unless noted otherwise by the specific authentication scheme.

If multiple attribute repository sources are defined, they are added into a list
and their results are cached and merged.

```properties
# cas.authn.attribute-repository.expiration-time=30
# cas.authn.attribute-repository.expiration-time-unit=MINUTES
# cas.authn.attribute-repository.maximum-cache-size=10000
# cas.authn.attribute-repository.merger=REPLACE|ADD|MULTIVALUED|NONE
# cas.authn.attribute-repository.aggregation=MERGE|CASCADE
```

<div class="alert alert-info"><strong>Remember This</strong><p>Note that in certain cases,
CAS authentication is able to retrieve and resolve attributes from the authentication source in the same authentication request, which would
eliminate the need for configuring a separate attribute repository specially if both the authentication and the attribute source are the same.
Using separate repositories should be required when sources are different, or when there is a need to tackle more advanced attribute
resolution use cases such as cascading, merging, etc.
<a href="../installation/Configuring-Principal-Resolution.html">See this guide</a> for more info.</p></div>

Attributes for all sources are defined in their own individual block.
CAS does not care about the source owner of attributes. It finds them where they can be found and otherwise, it moves on.
This means that certain number of attributes can be resolved via one source and the remaining attributes
may be resolved via another. If there are commonalities across sources, the merger shall decide the final result and behavior.

The story in plain english is:

- I have a bunch of attributes that I wish to resolve for the authenticated principal.
- I have a bunch of sources from which said attributes are retrieved.
- Figure it out.

Note that attribute repository sources, if/when defined, execute in a specific order.
This is important to take into account when attribute merging may take place.
By default, the execution order (when defined) is the following but can be adjusted per source:

1. LDAP
2. JDBC
3. JSON
4. Groovy
5. [Internet2 Grouper](http://www.internet2.edu/products-services/trust-identity/grouper/)
6. REST
7. Script
8. Stubbed/Static

Note that if no *explicit* attribute mappings are defined, all permitted attributes on the record
may be retrieved by CAS from the attribute repository source and made available to the principal. On the other hand,
if explicit attribute mappings are defined, then *only mapped attributes* are retrieved.

### Multimapped Attribute

Attributes may be allowed to be virtually renamed and remapped. The following definition, for instance, attempts to 
grab the attribute `uid` from the attribute source and rename it to `userId`:

```properties
# cas.authn.attribute-repository.[type-placeholder].attributes.uid=userId
```

### Merging Strategies

The following merging strategies can be used to resolve conflicts when the same attribute are found from multiple sources:

| Type                    | Description
|-------------------------|----------------------------------------------------------------------------------------------------
| `REPLACE`               | Overwrites existing attribute values, if any.
| `ADD`                   | Retains existing attribute values if any, and ignores values from subsequent sources in the resolution chain.
| `MULTIVALUED`           | Combines all values into a single attribute, essentially creating a multi-valued attribute.
| `NONE`                  | Do not merge attributes, only use attributes retrieved during authentication.

### Aggregation Strategies

The following aggregation strategies can be used to resolve and merge attributes
when multiple attribute repository sources are defined to fetch data:
  
| Type            | Description
|-----------------|----------------------------------------------------------------------------------------------------
| `MERGE`         | Default. Query multiple repositories in order and merge the results into a single result set.
| `CASCADE`       | Same as above; results from each query are passed down to the next attribute repository source.

### Stub

Static attributes that need to be mapped to a hardcoded value belong here.

```properties
# cas.authn.attribute-repository.stub.id=

# cas.authn.attribute-repository.stub.attributes.uid=uid
# cas.authn.attribute-repository.stub.attributes.displayName=displayName
# cas.authn.attribute-repository.stub.attributes.cn=commonName
# cas.authn.attribute-repository.stub.attributes.affiliation=groupMembership
```

### LDAP

{% include {{ version }}/ldap-configuration.md configKey="cas.authn.attribute-repository.ldap[0]" %}

```properties
# cas.authn.attribute-repository.ldap[0].id=
# cas.authn.attribute-repository.ldap[0].order=0

# cas.authn.attribute-repository.ldap[0].attributes.uid=uid
# cas.authn.attribute-repository.ldap[0].attributes.display-name=displayName
# cas.authn.attribute-repository.ldap[0].attributes.cn=commonName
# cas.authn.attribute-repository.ldap[0].attributes.affiliation=groupMembership
```

To fetch and resolve attributes that carry tags/options, consider tagging the mapped attribute as such:

```properties
# cas.authn.attribute-repository.ldap[0].attributes.affiliation=affiliation;
```
                                  
### Groovy

If you wish to directly and separately retrieve attributes from a Groovy script,
the following settings are then relevant:

```properties
# cas.authn.attribute-repository.groovy[0].location=file:/etc/cas/attributes.groovy
# cas.authn.attribute-repository.groovy[0].case-insensitive=false
# cas.authn.attribute-repository.groovy[0].order=0
# cas.authn.attribute-repository.groovy[0].id=
```

The Groovy script may be designed as:

```groovy
import java.util.*

def Map<String, List<Object>> run(final Object... args) {
    def username = args[0]
    def attributes = args[1]
    def logger = args[2]
    def properties = args[3]
    def appContext = args[4]

    logger.debug("[{}]: The received uid is [{}]", this.class.simpleName, uid)
    return[username:[uid], likes:["cheese", "food"], id:[1234,2,3,4,5], another:"attribute"]
}
```

### JSON

If you wish to directly and separately retrieve attributes from a static JSON source,
the following settings are then relevant:

```properties
# cas.authn.attribute-repository.json[0].location=file://etc/cas/attribute-repository.json
# cas.authn.attribute-repository.json[0].order=0
# cas.authn.attribute-repository.json[0].id=
```

The format of the file may be:

```json
{
    "user1": {
        "firstName":["Json1"],
        "lastName":["One"]
    },
    "user2": {
        "firstName":["Json2"],
        "eduPersonAffiliation":["employee", "student"]
    }
}
```

### REST

{% include {{ version }}/rest-integration.md configKey="cas.authn.attribute-repository.rest[0]" %}

```properties
# cas.authn.attribute-repository.rest[0].order=0
# cas.authn.attribute-repository.rest[0].id=
# cas.authn.attribute-repository.rest[0].case-insensitive=false
```

The authenticating user id is passed in form of a request parameter under `username`. The response is expected
to be a JSON map as such:

```json
{
  "name" : "JohnSmith",
  "age" : 29,
  "messages": ["msg 1", "msg 2", "msg 3"]
}
```

### Python/Javascript/Groovy

<div class="alert alert-warning"><strong>Usage</strong>
<p><strong>This feature is deprecated and is scheduled to be removed in the future.</strong></p>
</div>

Similar to the Groovy option but more versatile, this option takes advantage of Java's native 
scripting API to invoke Groovy, Python or Javascript scripting engines to compile a pre-defined script to resolve attributes. 
The following settings are relevant:

```properties
# cas.authn.attribute-repository.script[0].location=file:/etc/cas/script.groovy
# cas.authn.attribute-repository.script[0].order=0
# cas.authn.attribute-repository.script[0].id=
# cas.authn.attribute-repository.script[0].case-insensitive=false
# cas.authn.attribute-repository.script[0].engine-name=js|groovy|python
```

While Javascript and Groovy should be natively supported by CAS, Python scripts may need
to massage the CAS configuration to include the [Python modules](http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22jython-standalone%22).

The Groovy script may be defined as:

```groovy
import java.util.*

Map<String, List<Object>> run(final Object... args) {
    def uid = args[0]
    def logger = args[1]

    logger.debug("Groovy things are happening just fine with UID: {}",uid)
    return[username:[uid], likes:["cheese", "food"], id:[1234,2,3,4,5], another:"attribute"]
}
```

The Javascript script may be defined as:

```javascript
function run(uid, logger) {
    print("Things are happening just fine")
    logger.warn("Javascript called with UID: {}",uid);

    // If you want to call back into Java, this is one way to do so
    var javaObj = new JavaImporter(org.yourorgname.yourpackagename);
    with (javaObj) {
        var objFromJava = JavaClassInPackage.someStaticMethod(uid);
    }

    var map = {};
    map["attr_from_java"] = objFromJava.getSomething();
    map["username"] = uid;
    map["likes"] = "cheese";
    map["id"] = [1234,2,3,4,5];
    map["another"] = "attribute";

    return map;
}
```

### JDBC

Retrieve attributes from a JDBC source. 

{% include {{ version }}/rdbms-configuration.md configKey="cas.authn.attribute-repository.jdbc[0]" %}

```properties
# cas.authn.attribute-repository.jdbc[0].attributes.uid=uid
# cas.authn.attribute-repository.jdbc[0].attributes.display-name=displayName
# cas.authn.attribute-repository.jdbc[0].attributes.cn=commonName
# cas.authn.attribute-repository.jdbc[0].attributes.affiliation=groupMembership

# cas.authn.attribute-repository.jdbc[0].single-row=true
# cas.authn.attribute-repository.jdbc[0].order=0
# cas.authn.attribute-repository.jdbc[0].id=
# cas.authn.attribute-repository.jdbc[0].require-all-attributes=true
# cas.authn.attribute-repository.jdbc[0].case-canonicalization=NONE|LOWER|UPPER
# cas.authn.attribute-repository.jdbc[0].query-type=OR|AND
# cas.authn.attribute-repository.jdbc[0].case-insensitive-query-attributes=username

# Used only when there is a mapping of many rows to one user
# cas.authn.attribute-repository.jdbc[0].column-mappings.column-attr-name1=columnAttrValue1
# cas.authn.attribute-repository.jdbc[0].column-mappings.column-attr-name2=columnAttrValue2
# cas.authn.attribute-repository.jdbc[0].column-mappings.column-attr-name3=columnAttrValue3

# cas.authn.attribute-repository.jdbc[0].sql=SELECT * FROM table WHERE {0}
# cas.authn.attribute-repository.jdbc[0].username=uid
```

### Grouper

This option reads all the groups from [a Grouper instance](https://incommon.org/software/grouper/) for the given CAS principal and adopts them as CAS attributes under a `grouperGroups` multi-valued attribute.
To learn more about this topic, [please review this guide](../integration/Attribute-Resolution.html).

```properties
# cas.authn.attribute-repository.grouper[0].enabled=true
# cas.authn.attribute-repository.grouper[0].id=
# cas.authn.attribute-repository.grouper[0].order=0
```

You will also need to ensure `grouper.client.properties` is available on the classpath (i.e. `src/main/resources`)
with the following configured properties:

```properties
# grouperClient.webService.url = http://192.168.99.100:32768/grouper-ws/servicesRest
# grouperClient.webService.login = banderson
# grouperClient.webService.password = password
```

### Couchbase

This option will fetch attributes from a Couchbase database for a given CAS principal. To 
learn more about this topic, [please review this guide](../installation/Couchbase-Authentication.html). 

{% include {{ version }}/couchbase-configuration.md configKey="cas.authn.attribute-repository.couchbase" %}

```properties
# cas.authn.attribute-repository.couchbase.usernameAttribute=username
# cas.authn.attribute-repository.couchbase.order=0
# cas.authn.attribute-repository.couchbase.id=
```

### Redis

This option will fetch attributes from a Redis database for a given CAS principal. 

To learn more about this topic, [please review this guide](../installation/Redis-Authentication.html).

{% include {{ version }}/redis-configuration.md configKey="cas.authn.attribute-repository" %}

```properties
# cas.authn.attribute-repository.redis.order=0
# cas.authn.attribute-repository.redis.id=
```

### Microsoft Azure Active Directory

This option will fetch attributes from Microsoft Azure Active Directory using the Microsoft Graph API.

The following settings are available:

```properties
# cas.authn.attribute-repository.azure-active-directory[0].client-id=
# cas.authn.attribute-repository.azure-active-directory[0].client-secret=
# cas.authn.attribute-repository.azure-active-directory[0].client-secret=
# cas.authn.attribute-repository.azure-active-directory[0].tenant=

# cas.authn.attribute-repository.azure-active-directory[0].id=
# cas.authn.attribute-repository.azure-active-directory[0].order=0
# cas.authn.attribute-repository.azure-active-directory[0].case-insensitive=false
# cas.authn.attribute-repository.azure-active-directory[0].resource=
# cas.authn.attribute-repository.azure-active-directory[0].scope=
# cas.authn.attribute-repository.azure-active-directory[0].grant-type=
# cas.authn.attribute-repository.azure-active-directory[0].api-base-url=
# cas.authn.attribute-repository.azure-active-directory[0].attributes=
# cas.authn.attribute-repository.azure-active-directory[0].domain=
# cas.authn.attribute-repository.azure-active-directory[0].logging-level=
```

### Shibboleth Integrations

To learn more about this topic, [please review this guide](../integration/Shibboleth.html).

```properties
# cas.authn.shib-idp.server-url=https://idp.example.org
```

### Default Bundle

If you wish to release a default bundle of attributes to all applications,
and you would rather not duplicate the same attribute per every service definition,
then the following settings are relevant:

```properties
# cas.authn.attribute-repository.default-attributes-to-release=cn,givenName,uid,affiliation
```

To learn more about this topic, [please review this guide](../integration/Attribute-Release.html).

### Protocol Attributes

Defines whether CAS should include and release protocol attributes defined in the specification in addition to the
principal attributes. By default all authentication attributes are released when protocol attributes are enabled for
release. If you wish to restrict which authentication attributes get released, you can use the below settings to control authentication attributes more globally.

Protocol/authentication attributes may also be released conditionally on a per-service 
basis. To learn more about this topic, [please review this guide](../integration/Attribute-Release.html).

```properties
# cas.authn.authentication-attribute-release.only-release=authenticationDate,isFromNewLogin
# cas.authn.authentication-attribute-release.never-release=
# cas.authn.authentication-attribute-release.enabled=true
```

## Surrogate Authentication

Authenticate on behalf of another user.
To learn more about this topic, [please review this guide](../installation/Surrogate-Authentication.html).

```properties
# cas.authn.surrogate.separator=+
# cas.authn.surrogate.tgt.time-to-kill-in-seconds=30
```

{% include {{ version }}/persondirectory-configuration.md configKey="cas.authn.surrogate.principal" %}

### Static Surrogate Accounts

```properties
# cas.authn.surrogate.simple.surrogates.casuser=jsmith,jsmith2
# cas.authn.surrogate.simple.surrogates.casuser2=jsmith4,jsmith2
```

### JSON Surrogate Accounts

```properties
# cas.authn.surrogate.json.location=file:/etc/cas/config/surrogates.json
```

### LDAP Surrogate Accounts

{% include {{ version }}/ldap-configuration.md configKey="cas.authn.surrogate.ldap" %}

```properties
# cas.authn.surrogate.ldap.surrogate-search-filter=(&(principal={user})(memberOf=cn=edu:example:cas:something:{user},dc=example,dc=edu))
# cas.authn.surrogate.ldap.member-attribute-name=memberOf
# cas.authn.surrogate.ldap.member-attribute-value-regex=cn=edu:example:cas:something:([^,]+),.+
```

### CouchDb Surrogate Accounts

{% include {{ version }}/couchdb-integration.md configKey="cas.authn.surrogate" %}. 

Surrogates may be stored either as part of the principals profile or as a 
series of principal/surrogate pair. The default is a key/value pair.

```properties
# cas.authn.surrogate.ldap.surrogate-search-filter=(&(principal={user})(memberOf=cn=edu:example:cas:something:{user},dc=example,dc=edu))
# cas.authn.surrogate.ldap.member-attribute-name=memberOf
# cas.authn.surrogate.ldap.member-attribute-value-regex=cn=edu:example:cas:something:([^,]+),.+
```

### JDBC Surrogate Accounts

{% include {{ version }}/rdbms-configuration.md configKey="cas.authn.surrogate.jdbc" %}

```properties
# cas.authn.surrogate.jdbc.surrogate-search-query=SELECT COUNT(*) FROM surrogate WHERE username=?
# cas.authn.surrogate.jdbc.surrogate-account-query=SELECT surrogate_user AS surrogateAccount FROM surrogate WHERE username=?
```


### Webflow configuration

{% include {{ version }}/webflow-configuration.md configKey="cas.authn.token.webflow" %}

## X509 Authentication

To learn more about this topic, [please review this guide](../installation/X509-Authentication.html).

### Webflow configuration

{% include {{ version }}/webflow-configuration.md configKey="cas.authn.x509.webflow" %}

```properties
# cas.authn.x509.webflow.port=8446
# cas.authn.x509.webflow.client-auth=want
```

### Principal Resolution

{% include {{ version }}/principal-transformation.md configKey="cas.authn.x509" %}

X.509 principal resolution can act on the following principal types:

| Type                    | Description
|-------------------------|----------------------------------------------------------------------
| `SERIAL_NO`             | Resolve the principal by the serial number with a configurable <strong>radix</strong>, ranging from 2 to 36. If <code>radix</code> is <code>16</code>, then the serial number could be filled with leading zeros to even the number of digits.
| `SERIAL_NO_DN`          | Resolve the principal by serial number and issuer dn.
| `SUBJECT`               | Resolve the principal by extracting one or more attribute values from the certificate subject DN and combining them with intervening delimiters.
| `SUBJECT_ALT_NAME`      | Resolve the principal by the subject alternative name extension. (type: otherName)
| `SUBJECT_DN`            | The default type; Resolve the principal by the certificate's subject dn.
| `CN_EDIPI`              | Resolve the principal by the Electronic Data Interchange Personal Identifier (EDIPI) from the Common Name.
| `RFC822_EMAIL`          | Resolve the principal by the [RFC822 Name](https://tools.ietf.org/html/rfc5280#section-4.2.1.6) (aka E-mail address) type of subject alternative name field. 

For the `CN_EDIPI`,`SUBJECT_ALT_NAME`, and `RFC822_EMAIL` principal resolvers, since not all certificates have those attributes, 
you may specify the following property in order to have a different attribute from the certificate used as the principal.  
If no alternative attribute is specified then the principal will be null and CAS will fail auth or use a different authenticator.

```properties
# cas.authn.x509.alternate-principal-attribute=subjectDn|sigAlgOid|subjectX500Principal|x509Rfc822Email|x509subjectUPN
```

### CRL Fetching / Revocation

CAS provides a flexible policy engine for certificate revocation checking. This facility arose due to lack of configurability
in the revocation machinery built into the JSSE.

Available policies cover the following events:

- CRL Expiration
- CRL Unavailability

In either event, the following options are available:

| Type                    | Description
|-------------------------|----------------------------------------------------------------------------------------------------
| `ALLOW`                 | Allow authentication to proceed.
| `DENY`                  | Deny authentication and block.
| `THRESHOLD`             | Applicable to CRL expiration, throttle the request whereby expired data is permitted up to a threshold period of time but not afterward.


Revocation certificate checking can be carried out in one of the following ways:

| Type                    | Description
|-------------------------|----------------------------------------------------------------------------------------------------
| `NONE`                  | No revocation is performed.
| `CRL`                   | The CRL URI(s) mentioned in the certificate `cRLDistributionPoints` extension field. Caches are available to prevent excessive IO against CRL endpoints; CRL data is fetched if does not exist in the cache or if it is expired.
| `RESOURCE`              | A CRL hosted at a fixed location. The CRL is fetched at periodic intervals and cached.


To fetch CRLs, the following options are available:

| Type                    | Description
|-------------------------|----------------------------------------------------------------------------------------------------
| `RESOURCE`              | By default, all revocation checks use fixed resources to fetch the CRL resource from the specified location.
| `LDAP`                  | A CRL resource may be fetched from a pre-configured attribute, in the event that the CRL resource location is an LDAP URI

```properties
# cas.authn.x509.crl-expired-policy=DENY|ALLOW|THRESHOLD
# cas.authn.x509.crl-unavailable-policy=DENY|ALLOW|THRESHOLD
# cas.authn.x509.crl-resource-expired-policy=DENY|ALLOW|THRESHOLD
# cas.authn.x509.crl-resource-unavailable-policy=DENY|ALLOW|THRESHOLD

# cas.authn.x509.revocation-checker=NONE|CRL|RESOURCE
# cas.authn.x509.crl-fetcher=RESOURCE|LDAP

# cas.authn.x509.crl-resources[0]=file:/...

# cas.authn.x509.cache-max-elements-in-memory=1000
# cas.authn.x509.cache-disk-overflow=false
# cas.authn.x509.cache-disk-size=100MB
# cas.authn.x509.cache-eternal=false
# cas.authn.x509.cache-time-to-live-seconds=7200

# cas.authn.x509.mixed-mode=true

# cas.authn.x509.check-key-usage=false
# cas.authn.x509.revocation-policy-threshold=172800

# cas.authn.x509.reg-ex-subject-dn-pattern=.+
# cas.authn.x509.reg-ex-trusted-issuer-dn-pattern=.+

# cas.authn.x509.name=
# cas.authn.x509.order=

# cas.authn.x509.principal-descriptor=
# cas.authn.x509.max-path-length=1
# cas.authn.x509.throw-on-fetch-failure=false

# cas.authn.x509.check-all=false
# cas.authn.x509.require-key-usage=false
# cas.authn.x509.refresh-interval-seconds=3600
# cas.authn.x509.max-path-length-allow-unspecified=false

# SUBJECT_DN
# cas.authn.x509.subject-dn.format=[DEFAULT,RFC1779,RFC2253,CANONICAL]
```  

| Type          | Description
|---------------|----------------------------------------------------------------------
| `DEFAULT`     | Calls certificate.getSubjectDN() method for backwards compatibility but that method is ["denigrated"](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/security/cert/X509Certificate.html#getIssuerDN()). 
| `RFC1779`     | Calls [X500Principal.getName("RFC1779")](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/security/auth/x500/X500Principal.html#getName()) which emits a subject DN with the attribute keywords defined in RFC 1779 (CN, L, ST, O, OU, C, STREET). Any other attribute type is emitted as an OID.
| `RFC2253`     | Calls [X500Principal.getName("RFC2253")](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/security/auth/x500/X500Principal.html#getName()) which emits a subject DN with the attribute keywords defined in RFC 2253 (CN, L, ST, O, OU, C, STREET, DC, UID). Any other attribute type is emitted as an OID.
| `CANONICAL`   | Calls X500Principal.getName("CANONICAL" which emits a subject DN that starts with RFC 2253 and applies additional canonicalizations described in the [javadoc](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/security/auth/x500/X500Principal.html#getName()).

```properties
# SERIAL_NO_DN
# cas.authn.x509.serial-no-dn.serial-number-prefix=SERIALNUMBER=
# cas.authn.x509.serial-no-dn.value-delimiter=,

# SERIAL_NO
# cas.authn.x509.serial-no.principal-s-n-radix=10
# cas.authn.x509.serial-no.principal-hex-s-n-zero-padding=false

# SUBJECT_ALT_NAME
# cas.authn.x509.subject-alt-name.alternate-principal-attribute=[sigAlgOid|subjectDn|subjectX500Principal|x509Rfc822Email]

# CN_EDIPI 
# cas.authn.x509.cn-edipi.alternate-principal-attribute=[sigAlgOid|subjectDn|subjectX500Principal|x509Rfc822Email|x509subjectUPN]

# RFC822_EMAIL 
# cas.authn.x509.rfc822-email.alternate-principal-attribute=[sigAlgOid|subjectDn|subjectX500Principal|x509subjectUPN]
```

### X509 Certificate Extraction

These settings can be used to turn on and configure CAS to
extract an X509 certificate from a base64 encoded certificate
on a HTTP request header (placed there by a proxy in front of CAS).
If this is set to true, it is important that the proxy cannot
be bypassed by users and that the proxy ensures the header
never originates from the browser.

```properties
# cas.authn.x509.extract-cert=false
# cas.authn.x509.ssl-header-name=ssl_client_cert
```

The specific parsing logic for the certificate is compatible
with the Tomcat SSLValve which can work with headers set by
Apache HTTPD, Nginx, Haproxy, BigIP F5, etc.

### X509 Principal Resolution

```properties
# cas.authn.x509.principal-type=SERIAL_NO|SERIAL_NO_DN|SUBJECT|SUBJECT_ALT_NAME|SUBJECT_DN
```

{% include {{ version }}/persondirectory-configuration.md configKey="cas.authn.x509.principal" %}

### X509 LDAP Integration

{% include {{ version }}/ldap-configuration.md configKey="cas.authn.x509.ldap" %}

See LDAP attribute repositories [here](Configuration-Properties.html#ldap) to fetch additional 
LDAP attributes using the principal extracted from the X509 certificate.

## Pac4j Delegated AuthN

### GitHub

The following properties are additionally supported, when delegating authentication to GitHub:

```properties
# cas.authn.pac4j.github.scope=user|read:user|user:email|...
```       

The default scope is `user`, i.e. `read/write` access to the GitHub user account.

For a full list of possible scopes, please [see this link](https://developer.github.com/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/). 

### Google

The following properties are additionally supported, when delegating authentication to Google:

```properties
# cas.authn.pac4j.google.scope=EMAIL|PROFILE|EMAIL_AND_PROFILE
```

### CAS

Delegate authentication to an external CAS server.

```properties
# cas.authn.pac4j.cas[0].login-url=
# cas.authn.pac4j.cas[0].protocol=
```

### OAuth20

Delegate authentication to an generic OAuth2 server. 

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.oauth2[0]" %}
{% include {{ version }}/oauth-delegated-authentication.md configKey="cas.authn.pac4j.oauth2[0]" %}

### OpenID Connect

Delegate authentication to an external OpenID Connect server.

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.oidc[0]" %}
{% include {{ version }}/oidc-delegated-authentication.md configKey="cas.authn.pac4j.oidc[0]" %}

#### Google

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].google" %}
{% include {{ version }}/oidc-delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].google" %}

#### Azure AD

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].azure" %}
{% include {{ version }}/oidc-delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].azure" %}

The following settings specifically apply to this provider:

```properties
# cas.authn.pac4j.oidc[0].azure.tenant=tenant-name
```

#### KeyCloak

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].keycloak" %}
{% include {{ version }}/oidc-delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].keycloak" %}

```properties
# cas.authn.pac4j.oidc[0].keycloak.realm=
# cas.authn.pac4j.oidc[0].keycloak.base-uri=
```                                     

#### Apple Signin

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].apple" %}
{% include {{ version }}/oidc-delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].apple" %}

```properties
# cas.authn.pac4j.oidc[0].apple.private-key=
# cas.authn.pac4j.oidc[0].apple.private-key-id=
# cas.authn.pac4j.oidc[0].apple.team-id=
# cas.authn.pac4j.oidc[0].apple.timeout=PT30S
```  

#### Generic

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].generic" %}
{% include {{ version }}/oidc-delegated-authentication.md configKey="cas.authn.pac4j.oidc[0].generic" %}

### SAML2



#### SAML2 Identity Provider Discovery

```properties
cas.authn.pac4j.saml-discovery.resource[0].location=file:/etc/cas/config/json-feed.json
```

### Facebook

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.facebook" %}

```properties
# cas.authn.pac4j.facebook.fields=
# cas.authn.pac4j.facebook.scope=
```

### HiOrg Server

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.hi-org-server" %}

```properties
# cas.authn.pac4j.hi-org-server.scope=eigenedaten
```

### LinkedIn

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.linkedin" %}

```properties
# cas.authn.pac4j.linked-in.scope=
```

### Twitter

{% include {{ version }}/delegated-authentication.md configKey="cas.authn.pac4j.twitter" %}

```properties
# cas.authn.pac4j.twitter.include-email=false
```

## OAuth2

Allows CAS to act as an OAuth2 provider. Here you can control how long various tokens issued by CAS should last, etc.

{% include {{ version }}/signing-encryption.md configKey="cas.authn.oauth" signingKeySize="512" encryptionKeySize="256" encryptionAlg="AES_128_CBC_HMAC_SHA_256" %}

To learn more about this topic, [please review this guide](../installation/OAuth-OpenId-Authentication.html).

```properties
# cas.authn.oauth.replicate-sessions=false 
# cas.authn.oauth.grants.resource-owner.require-service-header=true
# cas.authn.oauth.user-profile-view-type=NESTED|FLAT
```

### Refresh Tokens

```properties
# cas.authn.oauth.refresh-token.time-to-kill-in-seconds=2592000
```

### Codes

```properties
# cas.authn.oauth.code.time-to-kill-in-seconds=30
# cas.authn.oauth.code.number-of-uses=1
```

### Access Tokens

```properties
# cas.authn.oauth.access-token.time-to-kill-in-seconds=7200
# cas.authn.oauth.access-token.max-time-to-live-in-seconds=28800
```

### Device Tokens
 
```
# cas.authn.oauth.device-token.time-to-kill-in-seconds=2592000
# cas.authn.oauth.device-token.refresh-interval=PT15S 
```

### Device User Codes

```
# cas.authn.oauth.device-user-code.time-to-kill-in-seconds=2592000
# cas.authn.oauth.device-user-code.user-code-length=8
```

### OAuth2 JWT Access Tokens

```properties
# cas.authn.oauth.access-token.create-as-jwt=false
# cas.authn.oauth.access-token.crypto.encryption-enabled=true
# cas.authn.oauth.access-token.crypto.signing-enabled=true
```

{% include {{ version }}/signing-encryption.md configKey="cas.authn.oauth.access-token" signingKeySize="512" encryptionKeySize="256" encryptionAlg="AES_128_CBC_HMAC_SHA_256" %}

