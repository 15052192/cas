<hr>
<h2>
<a id="layout-defaulttitle-cas---amazon-cloud-directory-authenticationcategory-authentication" class="anchor" href="#layout-defaulttitle-cas---amazon-cloud-directory-authenticationcategory-authentication" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>layout: default<br>
title: CAS - Amazon Cloud Directory Authentication<br>
category: Authentication</h2>
<h1>
<a id="amazon-cloud-directory-authentication" class="anchor" href="#amazon-cloud-directory-authentication" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Amazon Cloud Directory Authentication</h1>
<p>Amazon Cloud Directory is a highly available multi-tenant directory-based store in AWS. These directories scale automatically to hundreds of millions of objects as needed for applications. This lets operation's staff focus on developing and deploying applications that drive the business, not managing directory infrastructure.</p>
<p>To learn more, please <a href="http://docs.aws.amazon.com/directoryservice/latest/admin-guide/directory_amazon_cd.html">see this guide</a>.</p>
<h2>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h2>
<p>Support is enabled by including the following dependency in the WAR overlay:</p>
<p>{% include casmodule.html group="org.apereo.cas" module="cas-server-support-cloud-directory-authentication" %}</p>
<p>To see the relevant list of CAS properties, please <a href="../configuration/Configuration-Properties.html#amazon-cloud-directory-authentication">review this guide</a>.</p>
<p>AWS credentials are fetched from the following sources automatically, where relevant and made possible via CAS configuration:</p>
<ol>
<li>EC2 instance metadata linked to the IAM role.</li>
<li>External properties file that contains <code>accessKey</code> and <code>secretKey</code> as property keys.</li>
<li>AWS profile path and profile name.</li>
<li>System properties that include <code>aws.accessKeyId</code>, <code>aws.secretKey</code> and <code>aws.sessionToken</code>
</li>
<li>Environment variables that include <code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_KEY</code> and <code>AWS_SESSION_TOKEN</code>.</li>
<li>Properties file on the classpath as <code>awscredentials.properties</code> that contains <code>accessKey</code> and <code>secretKey</code> as property keys.</li>
<li>Static credentials for access key and secret provided directly by the configuration at hand (logging, etc).</li>
</ol>
<h2>
<a id="troubleshooting" class="anchor" href="#troubleshooting" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Troubleshooting</h2>
<p>To enable additional logging, configure the log4j configuration file to add the following levels:</p>
<pre lang="xml"><code>...
&lt;Logger name="com.amazonaws" level="debug" additivity="false"&gt;
    &lt;AppenderRef ref="console"/&gt;
    &lt;AppenderRef ref="file"/&gt;
&lt;/Logger&gt;
...
</code></pre>