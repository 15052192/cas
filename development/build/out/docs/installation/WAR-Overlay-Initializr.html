<hr>
<h2>
<a id="layout-defaulttitle-cas---war-overlay-initializrcategory-installation" class="anchor" href="#layout-defaulttitle-cas---war-overlay-initializrcategory-installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>layout: default<br>
title: CAS - WAR Overlay Initializr<br>
category: Installation</h2>
<h1>
<a id="war-overlay-initializr" class="anchor" href="#war-overlay-initializr" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>WAR Overlay Initializr</h1>
<p><a href="https://casinit.herokuapp.com/">Apereo CAS Initializr</a> is a relatively new addition to the Apereo CAS ecosystem that allows<br>
you as the deployer to generate CAS WAR Overlay projects on the fly with just what you need to start quickly.</p>
<p>To get started with a CAS deployment, adopters typically<br>
start with <a href="WAR-Overlay-Installation.html">a plain Gradle-based overlay project</a><br>
and use that as a baseline for future modifications. While this has been the traditional and recommended<br>
approach for many years, it can also be rather challenging for a relatively-novice user new to the<br>
ecosystem to download, modify and prepare an overlay project to include all required<br>
customizations. Given the overlay project’s static nature, it can also be challenging for<br>
project owners and maintainers to keep it up-to-date or offer additional enhancements<br>
and automation without affecting the baseline template.</p>
<p>To address such scenarios, the <a href="https://casinit.herokuapp.com/">CAS WAR Overlay Initializr</a> offers a fast way to pull<br>
in all the dependencies and modules needed for a CAS deployment and<br>
provides friendly and programmatic curl-friendly API to generate<br>
an overlay structure and required build files.</p>
<p>The underlying framework that handles the project generation<br>
task is based on <a href="https://github.com/spring-io/initializr">Spring Initializr</a>.</p>
<h2>
<a id="overview" class="anchor" href="#overview" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Overview</h2>
<p>The CAS Initializr can dynamically generate a starting project based on<br>
requested modules and dependencies needed for a deployment. This behavior<br>
can be tailored to the user’s experience based on that input and the<br>
conditions that follow to generate additional references, files, starting<br>
templates, and more in the same project to make the deployment process more comfortable.</p>
<p>CAS Initializr at this point is mainly a backend service and a few APIs.<br>
However, one could imagine that a graphical and modern user interface<br>
could be built on top of available APIs to help with the project<br>
generation task, especially for project newcomers.</p>
<p>Managing and maintaining a separate overlay projects and keeping them<br>
in sync with various CAS versions can be a costly maintenance task.<br>
CAS Initializr allows the project developers to automate the<br>
maintenance task, keep everything in the same repository<br>
for faster and more accurate upgrades.</p>
<!-- raw HTML omitted -->
<p>CAS Initializr is used internally by the CAS project itself in a<br>
very <em>Eat What Your Kill</em> type of way to dynamically generate<br>
overlay projects. These generated projects are used as CAS base<br>
Docker images published to Docker Hub, and as a baseline for<br>
browser/UI tests run by the CAS CI for each relevant feature.<br>
CAS Initializr uses itself to test itself!</p>
<h2>
<a id="project-generation" class="anchor" href="#project-generation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Project Generation</h2>
<p>The <a href="https://casinit.herokuapp.com/">CAS Initializr</a> can be invoked using curl to generate a CAS overlay project. To access<br>
the CAS Initializr, the following strategies can be used.</p>
<h3>
<a id="heroku" class="anchor" href="#heroku" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Heroku</h3>
<p>The CAS projects provides a running an instance of the CAS Initializr on <a href="https://casinit.herokuapp.com/">Heroku</a>. To get<br>
started with this instance, a simple way might be to include the following function in your bash profile:</p>
<pre lang="bash"><code>function getcas(){
    curl -k https://casinit.herokuapp.com/starter.tgz -d dependencies="$1" | tar -xzvf -
    ls
}
</code></pre>
<p>This allows you to generate a CAS overlay project using:</p>
<pre lang="bash"><code>getcas duo,oidc
</code></pre>
<p>…which generates a CAS overlay project prepared with multifactor authentication<br>
by <a href="../mfa/DuoSecurity-Authentication.html">Duo Security</a> and<br>
support for <a href="OAuth-OpenId-Authentication.html">OpenID Connect</a>.</p>
<!-- raw HTML omitted -->
<h3>
<a id="docker" class="anchor" href="#docker" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Docker</h3>
<p>In case the Initializr is not available on Heroku, you can also run your own Initializr instance via Docker:</p>
<pre lang="bash"><code>docker run --rm -p 8080:8080 apereo/cas-initializr:${tag}
</code></pre>
<p>The CAS Initializr should become available at <code>http://localhost:8080</code> and will respond to API<br>
requests using curl. Published images and tags of<br>
the CAS Initializr <a href="https://hub.docker.com/r/apereo/cas-initializr/tags">can be found here</a>.<br>
Each tagged image corresponds to the CAS server version for<br>
which the image is able to produce overlay projects.</p>
<h2>
<a id="cas-modules" class="anchor" href="#cas-modules" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>CAS Modules</h2>
<p>CAS project modules and dependencies that can be requested must be specified by<br>
their identifier. To see a full list of all dependencies supported and<br>
available by this service, you can invoke the following command:</p>
<pre lang="bash"><code>curl https://casinit.herokuapp.com/dependencies
</code></pre>
<p>Typically, dependency identifiers match CAS server dependency/module artifact names without<br>
the <code>cas-server-</code> prefix. Furthermore, certain dependencies can are assigned aliases as<br>
shortcuts to simplify requests. To see the full list of dependencies and their aliases, you may use:</p>
<pre lang="bash"><code>curl https://casinit.herokuapp.com/actuator/info
</code></pre>
<p>Furthermore, CAS Initializr publishes metadata about its capabilities, that is the<br>
available options for all request parameters (dependencies, type, etc.) A client to the<br>
service uses that information to initialize the select options and the tree of available dependencies.</p>
<p>You can grab the metadata on the root endpoint with the appropriate <code>Accept</code> header:</p>
<pre lang="bash"><code>curl -H 'Accept: application/json' https://casinit.herokuapp.com
</code></pre>
<p>Or using HTTPie:</p>
<pre lang="bash"><code>http https://casinit.herokuapp.com Accept:application/json
</code></pre>
<h3>
<a id="dependency-management" class="anchor" href="#dependency-management" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Dependency Management</h3>
<p>CAS Initializr is set to use the <a href="BOM-Dependency-Management.html">CAS BOM</a> for dependency management.</p>
<h2>
<a id="contributions" class="anchor" href="#contributions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contributions</h2>
<p>Please see <a href="../developer/Build-Process.html">this guide</a> for more details.</p>