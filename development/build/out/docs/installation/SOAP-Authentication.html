<hr>
<h2>
<a id="layout-defaulttitle-cas---soap-authenticationcategory-authentication" class="anchor" href="#layout-defaulttitle-cas---soap-authenticationcategory-authentication" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>layout: default<br>
title: CAS - SOAP Authentication<br>
category: Authentication</h2>
<h1>
<a id="soap-authentication" class="anchor" href="#soap-authentication" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>SOAP Authentication</h1>
<p>Verify and authenticate credentials where CAS acts as a SOAP client. Credentials are submitted to the SOAP endpoint whereupon authentication,<br>
the expected response is to return a username, a set of attributes and possibly a status that is loosely based on HTTP status codes which might help<br>
determine the <em>account status</em>.</p>
<p>The current schema is as such:</p>
<pre lang="xml"><code>&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns:tns="http://apereo.org/cas"
           targetNamespace="http://apereo.org/cas"
           elementFormDefault="qualified"&gt;

    &lt;xs:element name="getSoapAuthenticationRequest"&gt;
        &lt;xs:complexType&gt;
            &lt;xs:sequence&gt;
                &lt;xs:element name="username" type="xs:string"/&gt;
            &lt;/xs:sequence&gt;
        &lt;/xs:complexType&gt;
    &lt;/xs:element&gt;
    &lt;xs:element name="getSoapAuthenticationResponse"&gt;
        &lt;xs:complexType&gt;
            &lt;xs:sequence&gt;
                &lt;xs:element name="attributes" type="tns:MapItemType" minOccurs="0" maxOccurs="unbounded"/&gt;
                &lt;xs:element name="status" type="xs:int"/&gt;
                &lt;xs:element name="username" type="xs:string" minOccurs="0"/&gt;
                &lt;xs:element name="message" type="xs:string" minOccurs="0"/&gt;
            &lt;/xs:sequence&gt;
        &lt;/xs:complexType&gt;
    &lt;/xs:element&gt;
    &lt;xs:complexType name="MapItemType"&gt;
        &lt;xs:sequence&gt;
            &lt;xs:element name="key" type="xs:anyType"/&gt;
            &lt;xs:element name="value" type="xs:anyType"/&gt;
        &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
&lt;/xs:schema&gt;
</code></pre>
<p>Support is enabled by including the following dependency in the WAR overlay:</p>
<pre lang="xml"><code>&lt;dependency&gt;
  &lt;groupId&gt;org.apereo.cas&lt;/groupId&gt;
  &lt;artifactId&gt;cas-server-support-soap-authentication&lt;/artifactId&gt;
  &lt;version&gt;${cas.version}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h2>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h2>
<p>To see the relevant list of CAS properties, please <a href="../configuration/Configuration-Properties.html#soap-authentication">review this guide</a>.</p>
<p>The <code>status</code> returned in the SOAP response as interpreted as one of the following values:</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>200</code></td>
<td>Successful authentication.</td>
</tr>
<tr>
<td><code>403</code></td>
<td>Produces a <code>AccountDisabledException</code>
</td>
</tr>
<tr>
<td><code>404</code></td>
<td>Produces a <code>AccountNotFoundException</code>
</td>
</tr>
<tr>
<td><code>423</code></td>
<td>Produces a <code>AccountLockedException</code>
</td>
</tr>
<tr>
<td><code>412</code></td>
<td>Produces a <code>AccountExpiredException</code>
</td>
</tr>
<tr>
<td><code>428</code></td>
<td>Produces a <code>AccountPasswordMustChangeException</code>
</td>
</tr>
<tr>
<td>Other</td>
<td>Produces a <code>FailedLoginException</code>
</td>
</tr>
</tbody>
</table>
<h2>
<a id="troubleshooting" class="anchor" href="#troubleshooting" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Troubleshooting</h2>
<p>To enable additional logging, configure the log4j configuration file to add the following levels:</p>
<pre lang="xml"><code>...
&lt;Logger name="org.springframework.ws" level="debug" additivity="false"&gt;
    &lt;AppenderRef ref="console"/&gt;
    &lt;AppenderRef ref="file"/&gt;
&lt;/Logger&gt;
&lt;Logger name="org.apache.ws" level="debug" additivity="false"&gt;
    &lt;AppenderRef ref="console"/&gt;
    &lt;AppenderRef ref="file"/&gt;
&lt;/Logger&gt;
&lt;Logger name="org.apache.wss4j" level="debug" additivity="false"&gt;
    &lt;AppenderRef ref="console"/&gt;
    &lt;AppenderRef ref="file"/&gt;
&lt;/Logger&gt;
...
</code></pre>