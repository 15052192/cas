<hr>
<h2>
<a id="layout-defaulttitle-cas---apache-fortress-authenticationcategory-authentication" class="anchor" href="#layout-defaulttitle-cas---apache-fortress-authenticationcategory-authentication" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>layout: default<br>
title: CAS - Apache Fortress Authentication<br>
category: Authentication</h2>
<p>{% include variables.html %}</p>
<h1>
<a id="apache-fortress-authentication" class="anchor" href="#apache-fortress-authentication" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Apache Fortress Authentication</h1>
<p>Services connected to CAS can use <a href="http://directory.apache.org/fortress/">Apache Fortress</a> to handle the authentication and authorization with Apache Fortress.<br>
The idea of this is because Apache Fortress does not have any SSO mechanism. However, Apache Fortress is complied for <code>ANSI INCITS 359 RBAC</code>.<br>
<a href="http://directory.apache.org/fortress/testimonials.html">See this link</a> for background and history.</p>
<h2>
<a id="overview" class="anchor" href="#overview" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Overview</h2>
<p>The following diagram is a typical CAS deployment integrated with Apache Fortress:<br>
<img src="https://cloud.githubusercontent.com/assets/493782/26521160/f9987de0-430b-11e7-833d-a0e6257a9ebd.PNG" alt=""></p>
<p>In the above diagram, CAS will delegate the authentication to Fortress on behalf the Fortress admin user, which is<br>
configured in the <code>fortress.properties</code> file. CAS automatically search for this file (assuming classpath)<br>
and constructs an access manager component with the admin user as the default communication user to fortress.</p>
<p>To enable this feature, ensure Apache Fortress is <a href="http://directory.apache.org/fortress/installation.html" title="apache fortress installation">installed</a>.</p>
<p>Next include the following module in the WAR overlay:</p>
<p>{% include casmodule.html group="org.apereo.cas" module="cas-server-support-fortress" %}</p>
<p>At this time, Apache Fortress support is limited to Apache Tomcat as the web container.<br>
Support for additional containers such as Jetty will be worked out in future releases.</p>
<h2>
<a id="cas-configuration" class="anchor" href="#cas-configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>CAS Configuration</h2>
<ul>
<li>Configure <code>fortress.properties</code> file and put it under your <code>$TOMCAT_HOME/lib</code> or you can append your own classpath configuration. An example configuration<br>
file follows:</li>
</ul>
<pre lang="properties"><code>http.user=fortress-super-user
http.pw=verysecretpassword
http.host=localhost
http.port=8080
http.protocol=http
</code></pre>
<ul>
<li>Put Fortress Realm Proxy under your <code>$TOMCAT_HOME/lib</code>.</li>
<li>Add <code>-Dversion=&lt;your.fortress.version&gt;</code> to <code>JAVA_OPTS</code> or <code>CATALINA_OPTS</code>.</li>
</ul>
<h2>
<a id="client-configuration" class="anchor" href="#client-configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Client Configuration</h2>
<p>The fortress session is stored as a principal attribute <code>fortressSession</code>. As the client you need to extract<br>
this key in order to get <a href="http://directory.apache.org/fortress/gen-docs/latest/apidocs/org/apache/directory/fortress/core/model/Session.html">Session</a><br>
in xml form. With Fortress session later you can get the roles or get the permission dynamically by calling fortress rest.</p>