<hr>
<h2>
<a id="layout-defaulttitle-cas---configuring-authentication-componentscategory-authentication" class="anchor" href="#layout-defaulttitle-cas---configuring-authentication-componentscategory-authentication" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>layout: default<br>
title: CAS - Configuring Authentication Components<br>
category: Authentication</h2>
<p>{% include variables.html %}</p>
<h1>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h1>
<p>The CAS authentication process is primarily controlled by an authentication manager, which orchestrates a collection of authentication handlers.</p>
<h2>
<a id="authentication-manager" class="anchor" href="#authentication-manager" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Authentication Manager</h2>
<p>CAS ships with a single yet flexible authentication manager which performs authentication according to the following contract.</p>
<p>For any given credential the manager does the following:</p>
<ol>
<li>Iterate over all configured authentication handlers.</li>
<li>Attempt to authenticate a credential if a handler supports it.</li>
<li>On success attempt to resolve a principal.</li>
<li>Check whether a resolver is configured for the handler that authenticated the credential.</li>
<li>If a suitable resolver is found, attempt to resolve the principal.</li>
<li>If a suitable resolver is not found, use the principal resolved by the authentication handler.</li>
<li>Check whether the security policy (e.g. any, all) is satisfied.</li>
<li>If security policy is met return immediately.</li>
<li>Continue if security policy is not met.</li>
<li>After all credentials have been attempted check security policy again and throw <code>AuthenticationException</code> if not satisfied.</li>
</ol>
<p>There is an implicit security policy that requires at least one handler to successfully authenticate a credential.</p>
<p>To see the relevant list of CAS properties, please <a href="../configuration/Configuration-Properties.html#authentication-policy">review this guide</a>.</p>
<h2>
<a id="authentication-handlers" class="anchor" href="#authentication-handlers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Authentication Handlers</h2>
<p>There are a variety of authentication handlers and methods supported by CAS. Use the menu to navigate around the site and choose.</p>
<!-- raw HTML omitted -->
<p>To see the relevant list of CAS properties, please <a href="../configuration/Configuration-Properties.html#accept-users-authentication">review this guide</a>.</p>
<h3>
<a id="administrative-endpoints" class="anchor" href="#administrative-endpoints" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Administrative Endpoints</h3>
<p>The following endpoints are provided by CAS:</p>
<table>
<thead>
<tr>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>authenticationHandlers</code></td>
<td>A <code>GET</code> request presents the collection of registered authentication handlers. An individual authentication handler can be queried via <code>GET</code> by its name using a selector path (i.e. <code>authenticationHandlers/{name}</code>).</td>
</tr>
</tbody>
</table>
<h3>
<a id="resolution-strategy" class="anchor" href="#resolution-strategy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Resolution Strategy</h3>
<p>Authentication handlers are typically defined globally and then executed and tried by the authentication engine.<br>
The collection of handlers can be narrowed down using a selection criteria that defines an eligibility criteria<br>
for the handler based on the current authentication transaction, provided credentials, service definition policy<br>
and many other controls.</p>
<p>To see the relevant list of CAS properties, please <a href="../configuration/Configuration-Properties.html#authentication-engine">review this guide</a>.</p>
<h4>
<a id="per-registered-service" class="anchor" href="#per-registered-service" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Per Registered Service</h4>
<p>Each registered application in the registry may be assigned a set of identifiers/names for the required authentication<br>
handlers available and configured in CAS. These names can be used to enforce a service definition to only use the<br>
authentication strategy carrying that name when an authentication request is submitted to CAS.</p>
<p>Please <a href="../services/Configuring-Service-AuthN-Policy.html">review this guide</a> to learn more.</p>
<h4>
<a id="groovy-script" class="anchor" href="#groovy-script" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Groovy Script</h4>
<p>The global collection of authentication handlers can also pass through a Groovy script as a filter<br>
to narrow down the list of candidates for the current transaction. The outline of the script may be designed as:</p>
<pre lang="groovy"><code>def run(Object[] args) {
    def handlers = args[0]
    def transaction = args[1]
    def servicesManager = args[2]
    def logger = args[3]

    return handlers
}

def supports(Object[] args) {
    def handlers = args[0]
    def transaction = args[1]
    def servicesManager = args[2]
    def logger = args[3]
    true
}
</code></pre>
<p>The following parameters are passed to the script:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>handlers</code></td>
<td>Collection of available and candidate <code>AuthenticationHandler</code>s.</td>
</tr>
<tr>
<td><code>transaction</code></td>
<td>The authentication transaction currently in progress.</td>
</tr>
<tr>
<td><code>servicesManager</code></td>
<td>The <code>ServicesManager</code> object responsible for locating service definitions attached to this transaction.</td>
</tr>
<tr>
<td><code>logger</code></td>
<td>The object responsible for issuing log messages such as <code>logger.info(...)</code>.</td>
</tr>
</tbody>
</table>
<p>The outcome of the script should be the collection of selected handlers with the type <code>Set&lt;AuthenticationHandler&gt;</code>.</p>
<h3>
<a id="authentication-sequence" class="anchor" href="#authentication-sequence" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Authentication Sequence</h3>
<p>At runtime, CAS maintains a collection of authentication handlers/strategies that typically execute one after another.<br>
Each CAS module that presents a form of authentication strategy will simply insert itself into this collection at<br>
bootstrap time. At the end of this process, the result of all authentication transactions is collected and optionally processed by<br>
an authentication policy where success/failure of certain strategies/sources may be taken into account to fully satisfy the<br>
authentication requirements. The collection of authentication handlers tries to preserve order in a rather more deterministic way.<br>
The idea is that adopters can assign an <code>order</code> value to an authentication handler thereby explicitly positioning it in the<br>
collection and controlling its execution sequence.</p>
<h3>
<a id="naming-strategy" class="anchor" href="#naming-strategy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Naming Strategy</h3>
<p>Each authentication handler in CAS can be named via CAS settings and if left undefined, the short name of<br>
the handler component itself is used (i.e. <code>LdapAuthenticationHandler</code>). The name itself can be any arbitrary string and typically is used<br>
to identify and refer to the handler components in areas such as <a href="../services/Configuring-Service-AuthN-Policy.html">required authentication for a service</a>, etc.<br>
In the event that multiple authentication handlers <em>of the same type</em> are defined, it is <strong>RECOMMENDED</strong> that each be given a unique name so as to avoid conflicts.<br>
Authentication failures are typically collected in CAS by the name of each authentication handler. Leaving the name undefined will likely result in subsequent components in the authentication chain overriding previous results.</p>
<h2>
<a id="authentication-policy" class="anchor" href="#authentication-policy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Authentication Policy</h2>
<p>CAS presents a number of strategies for handling authentication security policies. Policies in general control the following:</p>
<ol>
<li>Should the authentication chain be stopped after a certain kind of authentication failure?</li>
<li>Given multiple authentication handlers in a chain, what constitutes a successful authentication event?</li>
</ol>
<p>Policies are typically activated after:</p>
<ol>
<li>An authentication failure has occurred.</li>
<li>The authentication chain has finished execution.</li>
</ol>
<p>Typical use cases of authentication policies may include:</p>
<ol>
<li>Enforce a specific authentication's successful execution, for the entire authentication event to be considered successful.</li>
<li>Ensure a specific class of failure is not evident in the authentication chain's execution log.</li>
<li>Ensure that all authentication schemes in the chain are executed successfully, for the entire authentication event to be considered successful.</li>
</ol>
<p>To see the relevant list of CAS properties, please <a href="../configuration/Configuration-Properties.html#authentication-policy">review this guide</a>.</p>
<h3>
<a id="administrative-endpoints-1" class="anchor" href="#administrative-endpoints-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Administrative Endpoints</h3>
<p>The following endpoints are provided by CAS:</p>
<table>
<thead>
<tr>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>authenticationPolicies</code></td>
<td>A <code>GET</code> request presents the collection of registered authentication policies. An individual authentication policy can be queried via <code>GET</code> by its name using a selector path (i.e. <code>authenticationPolicies/{name}</code>).</td>
</tr>
</tbody>
</table>
<h2>
<a id="principal-resolution" class="anchor" href="#principal-resolution" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Principal Resolution</h2>
<p>Please <a href="Configuring-Principal-Resolution.html">see this guide</a> more full details on principal resolution.</p>
<h3>
<a id="principal-transformation" class="anchor" href="#principal-transformation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Principal Transformation</h3>
<p>Authentication handlers that generally deal with username-password credentials<br>
can be configured to transform the user id prior to executing the authentication sequence.<br>
Each authentication strategy in CAS provides settings to properly transform the principal.<br>
Refer to the relevant settings for the authentication strategy at hand to learn more.</p>
<h2>
<a id="long-term-authentication" class="anchor" href="#long-term-authentication" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Long Term Authentication</h2>
<p>CAS has support for long term Ticket Granting Tickets, a feature that is also referred to as <em>"Remember Me"</em><br>
to extend the length of the SSO session beyond the typical configuration.<br>
Please <a href="Configuring-LongTerm-Authentication.html">see this guide</a> for more details.</p>
<h2>
<a id="proxy-authentication" class="anchor" href="#proxy-authentication" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Proxy Authentication</h2>
<p>Please <a href="Configuring-Proxy-Authentication.html">see this guide</a> for more details.</p>
<h2>
<a id="multifactor-authentication-mfa" class="anchor" href="#multifactor-authentication-mfa" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Multifactor Authentication (MFA)</h2>
<p>Please <a href="../mfa/Configuring-Multifactor-Authentication.html">see this guide</a> for more details.</p>
<h2>
<a id="login-throttling" class="anchor" href="#login-throttling" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Login Throttling</h2>
<p>CAS provides a facility for limiting failed login attempts to support password guessing and related abuse scenarios.<br>
Please <a href="Configuring-Authentication-Throttling.html">see this guide</a> for additional details on login throttling.</p>
<h2>
<a id="sso-session-cookie" class="anchor" href="#sso-session-cookie" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>SSO Session Cookie</h2>
<p>A ticket-granting cookie is an HTTP cookie set by CAS upon the establishment of a single sign-on session.<br>
This cookie maintains login state for the client, and while it is valid, the client can present it to CAS in lieu of primary credentials.<br>
Please <a href="Configuring-SSO.html">see this guide</a> for additional details.</p>