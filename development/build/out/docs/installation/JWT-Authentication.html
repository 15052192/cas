<hr>
<h2>
<a id="layout-defaulttitle-cas---jwt-authenticationcategory-authentication" class="anchor" href="#layout-defaulttitle-cas---jwt-authenticationcategory-authentication" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>layout: default<br>
title: CAS - JWT Authentication<br>
category: Authentication</h2>
<h1>
<a id="jwt-authentication" class="anchor" href="#jwt-authentication" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>JWT Authentication</h1>
<p><a href="http://jwt.io/">JSON Web Tokens</a> are an open, industry standard RFC 7519 method for representing claims securely between two parties.<br>
CAS provides support for token-based authentication on top of JWT, where an authentication request can be granted an SSO session based<br>
on a form of credentials that are JWTs.</p>
<h2>
<a id="jwt-service-tickets" class="anchor" href="#jwt-service-tickets" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>JWT Service Tickets</h2>
<p>CAS may also be allowed to fully create signed/encrypted JWTs and pass them back to the application in form of service tickets.<br>
In this case, JWTs are entirely self-contained and contain the authenticated principal as well as all authorized attributes<br>
in form of JWT claims. To learn more about this functionality, <a href="Configure-ServiceTicket-JWT.html">please review this guide</a>.</p>
<h2>
<a id="overview" class="anchor" href="#overview" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Overview</h2>
<p>CAS expects a <code>token</code> parameter (or request header) to be passed along to the <code>/login</code> endpoint. The parameter value must be a JWT.</p>
<!-- raw HTML omitted -->
<p>Here is an example of how to generate a JWT via <a href="https://github.com/pac4j/pac4j">Pac4j</a>:</p>
<pre lang="java"><code>final String signingSecret = RandomUtils.randomAlphanumeric(256);
final String encryptionSecret = RandomUtils.randomAlphanumeric(48);

System.out.println("signingSecret " + signingSecret);
System.out.println("encryptionSecret " + encryptionSecret);

final JwtGenerator&lt;CommonProfile&gt; g = new JwtGenerator&lt;&gt;();
g.setSignatureConfiguration(new SecretSignatureConfiguration(signingSecret, JWSAlgorithm.HS256));
g.setEncryptionConfiguration(new SecretEncryptionConfiguration(encryptionSecret,
        JWEAlgorithm.DIR, EncryptionMethod.A192CBC_HS384));

final CommonProfile profile = new CommonProfile();
profile.setId("casuser");
final String token = g.generate(profile);
System.out.println("token: " + token);
</code></pre>
<p>Once the token is generated, you may pass it to the <code>/login</code> endpoint of CAS as such:</p>
<pre lang="bash"><code>/cas/login?service=https://...&amp;token=&lt;TOKEN_VALUE&gt;
</code></pre>
<p>The <code>token</code> parameter may also be passed as a request header.</p>
<h2>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h2>
<p>JWT authentication support is enabled by including the following dependency in the WAR overlay:</p>
<pre lang="xml"><code>&lt;dependency&gt;
     &lt;groupId&gt;org.apereo.cas&lt;/groupId&gt;
     &lt;artifactId&gt;cas-server-support-token-webflow&lt;/artifactId&gt;
     &lt;version&gt;${cas.version}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>To see the relevant list of CAS properties, please <a href="../configuration/Configuration-Properties.html#jwttoken-authentication">review this guide</a>.</p>
<p>Configure the appropriate service in your service registry to hold the secrets:</p>
<pre lang="json"><code>{
  "@class" : "org.apereo.cas.services.RegexRegisteredService",
  "serviceId" : "https://.+",
  "name" : "testId",
  "id" : 1,
  "properties" : {
    "@class" : "java.util.HashMap",
    "jwtSigningSecret" : {
      "@class" : "org.apereo.cas.services.DefaultRegisteredServiceProperty",
      "values" : [ "java.util.HashSet", [ "&lt;SECRET&gt;" ] ]
    },
    "jwtEncryptionSecret" : {
      "@class" : "org.apereo.cas.services.DefaultRegisteredServiceProperty",
      "values" : [ "java.util.HashSet", [ "&lt;SECRET&gt;" ] ]
    },
    "jwtSigningSecretAlg" : {
      "@class" : "org.apereo.cas.services.DefaultRegisteredServiceProperty",
      "values" : [ "java.util.HashSet", [ "HS256" ] ]
    },
    "jwtEncryptionSecretAlg" : {
      "@class" : "org.apereo.cas.services.DefaultRegisteredServiceProperty",
      "values" : [ "java.util.HashSet", [ "dir" ] ]
    },
    "jwtEncryptionSecretMethod" : {
      "@class" : "org.apereo.cas.services.DefaultRegisteredServiceProperty",
      "values" : [ "java.util.HashSet", [ "A192CBC-HS384" ] ]
    },
    "jwtSecretsAreBase64Encoded" : {
       "@class" : "org.apereo.cas.services.DefaultRegisteredServiceProperty",
       "values" : [ "java.util.HashSet", [ "false" ] ]
    }
  }
}
</code></pre>
<p>Note that the only required property is <code>jwtSigningSecret</code>.</p>