<hr>
<h2>
<a id="layout-defaulttitle-cas---metricscategory-monitoring--statistics" class="anchor" href="#layout-defaulttitle-cas---metricscategory-monitoring--statistics" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>layout: default<br>
title: CAS - Metrics<br>
category: Monitoring &amp; Statistics</h2>
<p>{% include variables.html %}</p>
<h1>
<a id="cas-metrics" class="anchor" href="#cas-metrics" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>CAS Metrics</h1>
<p>CAS via Spring Boot registers the following core metrics when applicable:</p>
<p>JVM metrics, report utilization of:</p>
<ul>
<li>Various memory and buffer pools</li>
<li>Statistics related to garbage collection</li>
<li>Threads utilization</li>
<li>Number of classes loaded/unloaded</li>
<li>CPU metrics</li>
<li>File descriptor metrics</li>
<li>Logback metrics: record the number of events logged to Logback at each level</li>
<li>Uptime metrics: report a gauge for uptime and a fixed gauge representing the applicationâ€™s absolute start time</li>
<li>Tomcat metrics</li>
<li>Spring Integration metrics</li>
</ul>
<p>Support is enabled by including the following module in the Overlay:</p>
<p>{% include casmodule.html group="org.apereo.cas" module="cas-server-support-metrics" %}</p>
<p>Auto-configuration enables the instrumentation of all available DataSource objects<br>
with a metric named <code>jdbc</code>. Data source instrumentation results in gauges representing the<br>
currently active, maximum allowed, and minimum allowed connections in the pool.<br>
Each of these gauges has a name that is prefixed by <code>jdbc</code>. Metrics are also tagged by the name of the <code>DataSource</code><br>
computed based on the bean name. Also, Hikari-specific metrics are exposed with a <code>hikaricp</code> prefix. Each metric is tagged by the name of the Pool.</p>
<p>Auto-configuration enables the instrumentation of all available Caches on startup with metrics prefixed with cache.<br>
Cache instrumentation is standardized for a basic set of metrics. Additional, cache-specific metrics are also available.</p>
<p>Auto-configuration will enable the instrumentation of all available RabbitMQ connection factories with a metric named <code>rabbitmq</code>.</p>
<p>CAS Metrics are accessed and queried using the CAS actuator admin endpoints.<br>
Navigating to the endpoint displays a list of available meter names.<br>
You can drill down to view information about a particular meter by providing its name as a selector.</p>
<p><a href="Monitoring-Statistics.html">See this guide</a> to learn more.</p>
<h2>
<a id="administrative-endpoints" class="anchor" href="#administrative-endpoints" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Administrative Endpoints</h2>
<p>The following endpoints are provided by CAS:</p>
<table>
<thead>
<tr>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>statistics</code></td>
<td>Exposes statistics data on tickets, memory, server availability and uptime, etc.</td>
</tr>
</tbody>
</table>
<h2>
<a id="custom-metrics" class="anchor" href="#custom-metrics" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Custom Metrics</h2>
<p>To register custom metrics, inject <code>MeterRegistry</code> into your component, as shown in the following example:</p>
<pre lang="java"><code>public class Dictionary {
    private final List&lt;String&gt; words = new CopyOnWriteArrayList&lt;&gt;();

    Dictionary(final MeterRegistry registry) {
        registry.gaugeCollectionSize("dictionary.size", Tags.empty(), this.words);
    }
}
</code></pre>
<p>If you find that you repeatedly instrument a suite of metrics across components or applications,<br>
you may encapsulate this suite in a <code>MeterBinder</code> implementation. By default, metrics<br>
from all <code>MeterBinder</code> beans will be automatically bound to the Spring-managed <code>MeterRegistry</code>.</p>
<h1>
<a id="customizing-metrics" class="anchor" href="#customizing-metrics" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Customizing Metrics</h1>
<p>If you need to apply customizations to specific Meter instances you can use the <code>io.micrometer.core.instrument.config.MeterFilter</code> interface.<br>
By default, all <code>MeterFilter</code> beans will be automatically applied to the micrometer <code>MeterRegistry.Config</code>.</p>
<p>For example, if you want to rename the <code>mytag.region</code> tag to <code>mytag.area</code> for all meter IDs beginning with <code>com.example</code>, you can do the following:</p>
<pre lang="java"><code>@Bean
public MeterFilter renameRegionTagMeterFilter() {
    return MeterFilter.renameTag("com.example", "mytag.region", "mytag.area");
}
</code></pre>
<h2>
<a id="storage" class="anchor" href="#storage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Storage</h2>
<p>CAS metrics may be routed to varying types of databases for storage and analytics. The following options are available:</p>
<ul>
<li>Simple (In Memory)</li>
<li>Graphite</li>
<li>Ganglia</li>
<li>JMX</li>
<li>Atlas</li>
<li>Signal FX</li>
<li>Statsd</li>
<li>InfluxDb</li>
<li>Prometheus</li>
<li>Wavefront</li>
<li>New Relic</li>
<li>CloudWatch</li>
<li>...</li>
</ul>
<p>To see the relevant list of CAS properties, please <a href="../configuration/Configuration-Properties.html#metrics">review this guide</a>.</p>