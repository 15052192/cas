<hr>
<h2>
<a id="layout-defaulttitle-cas---password-managementcategory-password-management" class="anchor" href="#layout-defaulttitle-cas---password-managementcategory-password-management" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>layout: default<br>
title: CAS - Password Management<br>
category: Password Management</h2>
<p>{% include variables.html %}</p>
<h1>
<a id="password-management" class="anchor" href="#password-management" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Password Management</h1>
<p>If authentication fails due to a rejected password policy, CAS is able to intercept<br>
that request and allow the user to update the account password in place. The password management features of CAS are rather modest, and alternatively should the functionality provide inadequate for your policy, you may always redirect CAS to use a separate and standalone application that is fully in charge of managing the account password and associated flows.</p>
<p>CAS may also allow users to reset their passwords voluntarily. Those who have forgotten their account password<br>
may receive a secure link with a time-based expiration policy at their registered email address and/or phone. The link<br>
will allow the user to provide answers to his/her pre-defined security questions, which if successfully done,<br>
will allow the user to next reset their password and login again. You may also specify a pattern for accepted passwords.</p>
<p>By default, after a user has successfully changed their password they will be redirected to the login screen<br>
to enter their new password and log in. CAS can also be configured to automatically log the user in after<br>
a successful change. This behavior can be altered via CAS settings.</p>
<p>Support is enabled by including the following dependency in the WAR overlay:</p>
<p>{% include casmodule.html group="org.apereo.cas" module="cas-server-support-pm-webflow" %}</p>
<!-- raw HTML omitted -->
<h2>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h2>
<p>To learn more about available notification options, please <a href="../notifications/SMS-Messaging-Configuration.html">see this guide</a><br>
or <a href="../notifications/Sending-Email-Configuration.html">this guide</a>.</p>
<p>To see the relevant list of CAS properties, please <a href="../configuration/Configuration-Properties.html#password-management">review this guide</a>.</p>
<h2>
<a id="recaptcha-integration" class="anchor" href="#recaptcha-integration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>reCAPTCHA Integration</h2>
<p>Password reset attempts can be protected and integrated with <a href="https://developers.google.com/recaptcha">Google reCAPTCHA</a>. This requires the presence of reCAPTCHA settings for the basic integration and instructing the password management flow to turn on and verify requests via reCAPTCHA. To see the relevant list of CAS properties, please <a href="../configuration/Configuration-Properties.html#google-recaptcha-integration">review this guide</a> and <a href="../configuration/Configuration-Properties.html#password-management">this guide</a>.</p>
<h2>
<a id="password-history" class="anchor" href="#password-history" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Password History</h2>
<p>CAS allows for strategies to track and storage recycled password. Recycled passwords are kept in storage for the user account and<br>
are examined upon password updates for validity.</p>
<p>Once password history functionality is enabled, passwords can be tracked in history via a Groovy or an in-memory backend. Specific<br>
storage options may also provide their own support for password history.</p>
<h3>
<a id="groovy" class="anchor" href="#groovy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Groovy</h3>
<p>Password history tracking, once enabled, can be handed off to an external Groovy script as such:</p>
<pre lang="groovy"><code>def exists(Object[] args) {
    def request = args[0]
    def logger = args[1]
    return false
}

def store(Object[] args) {
    def request = args[0]
    def logger = args[1]
    return true
}

def fetchAll(Object[] args) {
    def logger = args[0]
    return []
}

def fetch(Object[] args) {
    def username = args[0]
    def logger = args[1]
    return []
}   

def remove(Object[] args) { 
    def username = args[0]
    def logger = args[1]
}

def removeAll(Object[] args) { 
    def logger = args[0]
}
</code></pre>
<p>The <code>request</code> parameter encapsulates a <code>PasswordChangeRequest</code> object, carrying <code>username</code> and <code>password</code> fields.</p>
<h2>
<a id="json-storage" class="anchor" href="#json-storage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>JSON Storage</h2>
<p>Accounts and password may be stored inside a static modest JSON resource. This option is most useful during development and<br>
for demo purposes. To learn more, please <a href="Password-Management-JSON.html">see this guide</a>.</p>
<h2>
<a id="groovy-storage" class="anchor" href="#groovy-storage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Groovy Storage</h2>
<p>Accounts and password may be handled and calculated via a Groovy script. To learn more,<br>
please <a href="Password-Management-Groovy.html">see this guide</a>.</p>
<h2>
<a id="ldap-storage" class="anchor" href="#ldap-storage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>LDAP Storage</h2>
<p>The account password and security questions may be stored inside an LDAP server. To learn more,<br>
please <a href="Password-Management-LDAP.html">see this guide</a>.</p>
<h2>
<a id="jdbc-storage" class="anchor" href="#jdbc-storage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>JDBC Storage</h2>
<p>The account password and security questions may be stored inside a relational database. To learn more,<br>
please <a href="Password-Management-JDBC.html">see this guide</a>.</p>
<h2>
<a id="rest-storage" class="anchor" href="#rest-storage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>REST Storage</h2>
<p>The account password and security questions can also be managed using a REST API. To learn more<br>
please <a href="Password-Management-REST.html">see this guide</a>.</p>
<h2>
<a id="custom" class="anchor" href="#custom" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Custom</h2>
<p>To design your own password management storage options and strategy,<br>
please <a href="Password-Management-Custom.html">see this guide</a>.</p>