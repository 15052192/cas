<hr>
<h2>
<a id="layout-defaulttitle-cas---configuration-management---reloading-changescategory-configuration" class="anchor" href="#layout-defaulttitle-cas---configuration-management---reloading-changescategory-configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>layout: default<br>
title: CAS - Configuration Management - Reloading Changes<br>
category: Configuration</h2>
<p>{% include variables.html %}</p>
<h1>
<a id="reloading-changes" class="anchor" href="#reloading-changes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Reloading Changes</h1>
<p>The CAS spring cloud configuration server is able to consume properties and settings<br>
via the <a href="Configuration-Server-Management.html">profiles outlined here</a>. The server is constantly monitoring<br>
changes to the underlying property sources automatically, but has no way to broadcast those changes<br>
to its own clients, such as the CAS server itself, which would act as <em>a client of the configuration<br>
server</em> expecting change notifications to quietly reload its configuration.</p>
<p>Therefore, in order to broadcast such <code>change</code> events CAS<br>
presents <a href="../monitoring/Monitoring-Statistics.html">various endpoints</a> that allow the adopter<br>
to <strong>refresh</strong> the configuration as needed. This means that an adopter would<br>
change a required CAS settings and then would submit<br>
a request to CAS to refresh its current state. All CAS internal components that are affected<br>
by the external change are quietly reloaded<br>
and the setting takes immediate effect, completely removing the need for container restarts or CAS re-deployments.</p>
<!-- raw HTML omitted -->
<p>To see the relevant list of CAS properties, please <a href="Configuration-Properties.html#cloud-configuration-bus">review this guide</a>.</p>
<h2>
<a id="reload-strategy" class="anchor" href="#reload-strategy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Reload Strategy</h2>
<p>CAS uses <a href="https://github.com/spring-cloud/spring-cloud-config">Spring Cloud</a><br>
to manage the internal state of the configuration. The configuration server that<br>
is provided by Spring Cloud embedded in CAS is constantly monitoring sources<br>
that house CAS settings and upon changes will auto-refresh itself.</p>
<h3>
<a id="application-context" class="anchor" href="#application-context" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Application Context</h3>
<p>The CAS application context and runtime environment that contains all Spring components and bean definitions<br>
can be reloaded using the following administrative endpoint:</p>
<p>The following endpoints are provided by CAS:</p>
<table>
<thead>
<tr>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>reloadContext</code></td>
<td>Reloads the CAS application context and all bean definitions where necessary.</td>
</tr>
</tbody>
</table>
<h3>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h3>
<p>Changes in CAS configuration settings and properties can be reloaded using the strategies outlined below.</p>
<h4>
<a id="standalone" class="anchor" href="#standalone" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Standalone</h4>
<p>In the event that the <a href="Configuration-Server-Management.html#standalone">standalone configuration profile</a><br>
is used to control and direct settings and Spring Cloud configuration server is disabled,<br>
CAS will begin to automatically watch and monitor the configuration files indicated by the profile and will auto-reload the state of the runtime<br>
application context automatically. You may also attempt to <a href="../monitoring/Monitoring-Statistics.html">refresh settings manually</a><br>
via the CAS admin endpoints.</p>
<p>Support is enabled by including the following dependency in the WAR overlay:</p>
<pre lang="xml"><code>&lt;dependency&gt;
  &lt;groupId&gt;org.apereo.cas&lt;/groupId&gt;
  &lt;artifactId&gt;cas-server-core-events-configuration&lt;/artifactId&gt;
  &lt;version&gt;${cas.version}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h4>
<a id="spring-cloud" class="anchor" href="#spring-cloud" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Spring Cloud</h4>
<p>Clients of the configuration server (i.e. CAS server web application) do also expose a <code>/refresh</code> endpoint<br>
that allow one to refresh the configuration based on the current state of the configuration server and reconfigure<br>
the application runtime without the need to restart the JVM.</p>
<pre lang="bash"><code>curl -X POST https://cas.server.url/cas/actuator/refresh
</code></pre>
<p><a href="../monitoring/Monitoring-Statistics.html">See this guide</a> to learn more about various monitoring endpoints, etc.</p>