<hr>
<h2>
<a id="layout-defaulttitle-cas---jpa-ticket-registrycategory-ticketing" class="anchor" href="#layout-defaulttitle-cas---jpa-ticket-registrycategory-ticketing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>layout: default<br>
title: CAS - JPA Ticket Registry<br>
category: Ticketing</h2>
<p>{% include variables.html %}</p>
<h1>
<a id="jpa-ticket-registry" class="anchor" href="#jpa-ticket-registry" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>JPA Ticket Registry</h1>
<p>The JPA Ticket Registry allows CAS to store client authenticated state<br>
data (tickets) in a database back-end such as MySQL.</p>
<!-- raw HTML omitted -->
<p>Support is enabled by adding the following module into the overlay:</p>
<p>{% include casmodule.html group="org.apereo.cas" module="cas-server-support-jpa-ticket-registry" %}</p>
<h2>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h2>
<p>To see the relevant list of CAS properties, please <a href="../configuration/Configuration-Properties.html#jpa-ticket-registry">review this guide</a>.</p>
<p>A background <em>cleaner</em> process is also automatically scheduled to scan the chosen database periodically and remove expired records based on configured threshold parameters.</p>
<!-- raw HTML omitted -->
<h2>
<a id="ticket-granting-ticket-locking" class="anchor" href="#ticket-granting-ticket-locking" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Ticket-granting Ticket Locking</h2>
<p>TGTs are almost always updated within the same transaction they are loaded from the database in, but<br>
after some processing delays. Because of this, the JPA Ticket Registry utilizes write locks on all loads of<br>
TGTs from the database to prevent deadlocks and ensure usage meta-data consistency when a single<br>
TGT is used concurrently by multiple requests.</p>
<p>This reduces performance of the JPA Ticket Registry and may not be desirable or necessary for some deployments depending<br>
the database in use, its configured transaction isolation level, and expected concurrency of a single<br>
TGT.</p>
<p>To see the relevant list of CAS properties, please <a href="../configuration/Configuration-Properties.html#jpa-ticket-registry">review this guide</a>.</p>