<hr>
<h2>
<a id="layout-defaulttitle-cas---couchbase-ticket-registrycategory-ticketing" class="anchor" href="#layout-defaulttitle-cas---couchbase-ticket-registrycategory-ticketing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>layout: default<br>
title: CAS - Couchbase Ticket Registry<br>
category: Ticketing</h2>
<h1>
<a id="couchbase-ticket-registry" class="anchor" href="#couchbase-ticket-registry" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Couchbase Ticket Registry</h1>
<p>Couchbase integration is enabled by including the following dependency in the WAR overlay:</p>
<p>{% include casmodule.html group="org.apereo.cas" module="cas-server-support-couchbase-ticket-registry" %}</p>
<p><a href="http://www.couchbase.com">Couchbase</a> is a highly available, open source NoSQL database server based on<br>
<a href="http://www.erlang.org">Erlang/OTP</a> and its mnesia database. The intention of this<br>
registry is to leverage the capability of Couchbase server to provide high availability to CAS.</p>
<!-- raw HTML omitted -->
<h2>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h2>
<p>To see the relevant list of CAS properties, please <a href="../configuration/Configuration-Properties.html#couchbase-ticket-registry">review this guide</a>.</p>
<p>The Couchbase integration currently assumes that the ticket registries are stored<br>
in their own buckets. You may optionally set passwords for the buckets and optionally configure<br>
redundancy and replication as per normal Couchbase configuration.</p>
<p>The only truly mandatory setting is the list of nodes.<br>
The other settings are optional, but this is designed to store data in buckets<br>
so in reality the bucket property must also be set.</p>
<h2>
<a id="expiration-policy" class="anchor" href="#expiration-policy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Expiration Policy</h2>
<p>You will need to remember that every document in Couchbase contains the <code>expiry</code> property.<br>
An expiration time-to-live value of <code>0</code> means that no expiration is set at all.<br>
The expiration time starts when the document has been successfully stored on the server,<br>
not when the document was created on the CAS server. In practice, the delta should be very very negligible.<br>
Any expiration time larger than <code>30</code> days in seconds is considered absolute (as in a Unix time stamp)<br>
and anything smaller is considered relative in seconds.</p>
<h2>
<a id="troubleshooting" class="anchor" href="#troubleshooting" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Troubleshooting</h2>
<p>To enable additional logging, configure the log4j configuration file to add the following<br>
levels:</p>
<pre lang="xml"><code>...
&lt;Logger name="com.couchbase" level="debug" additivity="false"&gt;
    &lt;AppenderRef ref="console"/&gt;
    &lt;AppenderRef ref="file"/&gt;
&lt;/Logger&gt;
...
</code></pre>