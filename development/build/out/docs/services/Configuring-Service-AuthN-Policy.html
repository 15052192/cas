<hr>
<h2>
<a id="layout-defaulttitle-cas---service-authentication-policycategory-services" class="anchor" href="#layout-defaulttitle-cas---service-authentication-policycategory-services" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>layout: default<br>
title: CAS - Service Authentication Policy<br>
category: Services</h2>
<h1>
<a id="service-authentication-policy" class="anchor" href="#service-authentication-policy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Service Authentication Policy</h1>
<p>Each registered application in the registry may be assigned an authentication policy that indicates how CAS<br>
should validate and execute the authentication transaction when processing the given service. The authentication policy<br>
may at times override what is globally found in the CAS authentication engine, or it may present complementary features<br>
to enhance the authentication flow.</p>
<pre lang="json"><code>{
  "@class" : "org.apereo.cas.services.RegexRegisteredService",
  "serviceId" : "https://app.example.org/.+",
  "name" : "ExampleApp",
  "id" : 1,
  "authenticationPolicy" : {
    "@class" : "org.apereo.cas.services.DefaultRegisteredServiceAuthenticationPolicy",  
    "requiredAuthenticationHandlers" : ["java.util.TreeSet", [ "AuthNHandlerName" ]],
    "excludedAuthenticationHandlers" : ["java.util.TreeSet", [ ]]
  }
}
</code></pre>
<p>The following fields may be assigned to the policy:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>requiredAuthenticationHandlers</code></td>
<td>A set of identifiers/names for the required authentication handlers available and configured in CAS. These names can be used to enforce a service definition to only use the authentication strategy carrying that name when an authentication request is submitted to CAS.</td>
</tr>
<tr>
<td><code>excludedAuthenticationHandlers</code></td>
<td>A set of identifiers/names for excluded authentication handlers. These names can be used to enforce a service definition to <em>exclude</em> and disqualify certain authentication handlers when an authentication request is submitted to CAS.</td>
</tr>
</tbody>
</table>
<p>Note that while authentication methods in CAS all are given a default name, most if not all methods can be assigned a name via CAS settings.</p>
<h2>
<a id="authentication-policy-criteria" class="anchor" href="#authentication-policy-criteria" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Authentication Policy Criteria</h2>
<p>Authentication policy criteria can also be assigned to each application definition, which should override the global policy defined for the deployment.<br>
Such policies should closely follow after those <a href="../installation/Configuring-Authentication-Components.html#authentication-policy">that can be defined globally</a>, are entirely optional and can be one of the following types:</p>
<h3>
<a id="allowed" class="anchor" href="#allowed" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Allowed</h3>
<p>Maps to the <code>Required</code> <a href="../configuration/Configuration-Properties.html#required">authentication policy</a>.</p>
<pre lang="json"><code>{
  "@class": "org.apereo.cas.services.RegexRegisteredService",
  "serviceId": "^(https|imaps)://.*",
  "name": "Example",
  "id": 1,
  "authenticationPolicy": {
    "@class": "org.apereo.cas.services.DefaultRegisteredServiceAuthenticationPolicy",
    "requiredAuthenticationHandlers" : ["java.util.TreeSet", [ "JSON" ]],
    "criteria": {
      "@class": "org.apereo.cas.services.AllowedAuthenticationHandlersRegisteredServiceAuthenticationPolicyCriteria"
    }
  }
}
</code></pre>
<h3>
<a id="excluded" class="anchor" href="#excluded" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Excluded</h3>
<p>Enable the authentication policy criteria to exclude and disqualify indicated authentication handlers by their name.</p>
<pre lang="json"><code>{
  "@class": "org.apereo.cas.services.RegexRegisteredService",
  "serviceId": "^(https|imaps)://.*",
  "name": "Example",
  "id": 1,
  "authenticationPolicy": {
    "@class": "org.apereo.cas.services.DefaultRegisteredServiceAuthenticationPolicy",
    "excludedAuthenticationHandlers" : ["java.util.TreeSet", [ "JSON" ]],
    "criteria": {
      "@class": "org.apereo.cas.services.ExcludedAuthenticationHandlersRegisteredServiceAuthenticationPolicyCriteria"
    }
  }
}
</code></pre>
<h3>
<a id="any" class="anchor" href="#any" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Any</h3>
<p>Maps to the <code>Any</code> <a href="../configuration/Configuration-Properties.html#authentication-policy">authentication policy</a>.</p>
<pre lang="json"><code>{
  "@class" : "org.apereo.cas.services.RegexRegisteredService",
  "serviceId" : "https://app.example.org/.+",
  "name" : "ExampleApp",
  "id" : 1,
  "authenticationPolicy" : {
    "@class" : "org.apereo.cas.services.DefaultRegisteredServiceAuthenticationPolicy",
    "criteria": {
      "@class" : "org.apereo.cas.services.AnyAuthenticationHandlerRegisteredServiceAuthenticationPolicyCriteria",
      "tryAll": true
    }
  }
}
</code></pre>
<h3>
<a id="all" class="anchor" href="#all" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>All</h3>
<p>Maps to the <code>All</code> <a href="../configuration/Configuration-Properties.html#authentication-policy">authentication policy</a>.</p>
<pre lang="json"><code>{
  "@class" : "org.apereo.cas.services.RegexRegisteredService",
  "serviceId" : "https://app.example.org/.+",
  "name" : "ExampleApp",
  "id" : 1,
  "authenticationPolicy" : {
    "@class" : "org.apereo.cas.services.DefaultRegisteredServiceAuthenticationPolicy",
    "criteria": {
      "@class" : "org.apereo.cas.services.AllAuthenticationHandlersRegisteredServiceAuthenticationPolicyCriteria"
    }
  }
}
</code></pre>
<h3>
<a id="not-prevented" class="anchor" href="#not-prevented" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Not Prevented</h3>
<p>Maps to the <code>Not Prevented</code> <a href="../configuration/Configuration-Properties.html#authentication-policy">authentication policy</a>.</p>
<pre lang="json"><code>{
  "@class" : "org.apereo.cas.services.RegexRegisteredService",
  "serviceId" : "https://app.example.org/.+",
  "name" : "ExampleApp",
  "id" : 1,
  "authenticationPolicy" : {
    "@class" : "org.apereo.cas.services.DefaultRegisteredServiceAuthenticationPolicy",
    "criteria": {
      "@class" : "org.apereo.cas.services.NotPreventedRegisteredServiceAuthenticationPolicyCriteria"
    }
  }
}
</code></pre>
<h3>
<a id="groovy" class="anchor" href="#groovy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Groovy</h3>
<p>Maps to the <code>Groovy</code> <a href="../configuration/Configuration-Properties.html#authentication-policy">authentication policy</a>.</p>
<pre lang="json"><code>{
  "@class" : "org.apereo.cas.services.RegexRegisteredService",
  "serviceId" : "https://app.example.org/.+",
  "name" : "ExampleApp",
  "id" : 1,
  "authenticationPolicy" : {
    "@class" : "org.apereo.cas.services.DefaultRegisteredServiceAuthenticationPolicy",
    "criteria": {
      "@class" : "org.apereo.cas.services.GroovyRegisteredServiceAuthenticationPolicyCriteria",
      "script": "..."
    }
  }
}
</code></pre>
<p>The <code>script</code> attribute can either be an inline Groovy script or a reference to an external file.</p>
<h3>
<a id="rest" class="anchor" href="#rest" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>REST</h3>
<p>Maps to the <code>Rest</code> <a href="../configuration/Configuration-Properties.html#authentication-policy">authentication policy</a>.</p>
<pre lang="json"><code>{
  "@class" : "org.apereo.cas.services.RegexRegisteredService",
  "serviceId" : "https://app.example.org/.+",
  "name" : "ExampleApp",
  "id" : 1,
  "authenticationPolicy" : {
    "@class" : "org.apereo.cas.services.DefaultRegisteredServiceAuthenticationPolicy",
    "criteria": {
      "@class" : "org.apereo.cas.services.RestfulRegisteredServiceAuthenticationPolicyCriteria",
      "url": "...",
      "basicAuthUsername": "...",
      "basicAuthPassword": "..."
    }
  }
}
</code></pre>