<hr>
<h2>
<a id="layout-defaulttitle-cas---configuring-service-sso-policycategory-services" class="anchor" href="#layout-defaulttitle-cas---configuring-service-sso-policycategory-services" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>layout: default<br>
title: CAS - Configuring Service SSO Policy<br>
category: Services</h2>
<h1>
<a id="configuring-service-sso-policy" class="anchor" href="#configuring-service-sso-policy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuring Service SSO Policy</h1>
<p>Single Sign-on participation policies designed on a per-service basis should override the global SSO behavior. Such policies generally are applicable<br>
to participation in single sign-on sessions, creating SSO cookies, etc.</p>
<h2>
<a id="single-sign-on-cookie" class="anchor" href="#single-sign-on-cookie" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Single Sign-on Cookie</h2>
<p>CAS adopters may want to allow for a behavior where logging in to a non-SSO-participating application<br>
via CAS either does not create a CAS SSO session and the SSO session it creates is not honored for authenticating subsequently<br>
to an SSO-participating application. This behavior can be defined on a per-service basis.</p>
<pre lang="json"><code>{
  "@class" : "org.apereo.cas.services.RegexRegisteredService",
  "serviceId" : "...",
  "name" : "...",
  "id" : 1,
  "singleSignOnParticipationPolicy": {
    "@class": "org.apereo.cas.services.DefaultRegisteredServiceSingleSignOnParticipationPolicy",
    "createCookieOnRenewedAuthentication": "TRUE"
  }
}
</code></pre>
<p>Acceptable values for <code>createCookieOnRenewedAuthentication</code> are <code>TRUE</code>, <code>FALSE</code> or <code>UNDEFINED</code>.</p>
<h2>
<a id="participation-policies" class="anchor" href="#participation-policies" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Participation Policies</h2>
<p>Additional policies can be assigned to each service definition to control participation of an application in an existing single sign-on session.<br>
If conditions hold true, CAS shall honor the existing SSO session and will not challenge the user for credentials. If conditions fail, then<br>
user may be asked for credentials. Such policies can be chained together and executed in order.</p>
<h3>
<a id="authentication-date" class="anchor" href="#authentication-date" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Authentication Date</h3>
<p>Honor the existing single sign-on session, if any, if the authentication date is at most <code>5</code> seconds old. Otherwise, challenge<br>
the user for credentials and ignore the existing session.</p>
<pre lang="json"><code>{
  "@class" : "org.apereo.cas.services.RegexRegisteredService",
  "serviceId" : "...",
  "name" : "...",
  "id" : 1,
  "singleSignOnParticipationPolicy":
    {
      "@class": "org.apereo.cas.services.ChainingRegisteredServiceSingleSignOnParticipationPolicy",
      "policies": [ "java.util.ArrayList",
        [
          {
            "@class": "org.apereo.cas.services.AuthenticationDateRegisteredServiceSingleSignOnParticipationPolicy",
            "timeUnit": "SECONDS",
            "timeValue": 5,
            "order": 0
          }
        ]
      ]
    }
}
</code></pre>
<h3>
<a id="last-used-time" class="anchor" href="#last-used-time" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Last Used Time</h3>
<p>Honor the existing single sign-on session, if any, if the last time an SSO session was used is at most <code>5</code> seconds old. Otherwise, challenge the<br>
user for credentials and ignore the existing session.</p>
<p>The policy calculation here typically includes evaluating the last-used-time of the ticket-granting ticket linked to the SSO session to check whether<br>
the ticket continues to actively issue service tickets, etc.</p>
<pre lang="json"><code>{
  "@class" : "org.apereo.cas.services.RegexRegisteredService",
  "serviceId" : "...",
  "name" : "...",
  "id" : 1,
  "singleSignOnParticipationPolicy":
    {
      "@class": "org.apereo.cas.services.ChainingRegisteredServiceSingleSignOnParticipationPolicy",
      "policies": [ "java.util.ArrayList",
        [
          {
            "@class": "org.apereo.cas.services.LastUsedTimeRegisteredServiceSingleSignOnParticipationPolicy",
            "timeUnit": "SECONDS",
            "timeValue": 5,
            "order": 0
          }
        ]
      ]
    }
}
</code></pre>
<h2>
<a id="custom" class="anchor" href="#custom" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Custom</h2>
<p>Participation in a single sign-on session can be customized and controlled using custom strategies registered with CAS per the below syntax:</p>
<pre lang="java"><code>@Bean
public SingleSignOnParticipationStrategyConfigurer customSsoConfigurer() {
    return chain -&gt; chain.addStrategy(...);
}
</code></pre>
<p><a href="../configuration/Configuration-Management-Extensions.html">See this guide</a> to learn more about how to register configurations into the CAS runtime.</p>