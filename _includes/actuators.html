{% assign min = 1 %}
{% assign max = 999999 %}
{% assign diff = max | minus: min %}

{% assign rbrace = "}" %}
{% assign lbrace = "{" %}

{% assign randomNumber = include.endpoints | remove: "," | truncate: 50, '' %}
{% assign endpoints = include.endpoints | split: "," %}

<div class="accordion" id="{{ randomNumber }}">
    {% assign showClass = "" %}

    {% for endpoint in endpoints %}

        {% for configblock in site.data[version].actuators[endpoint] %}
        {% assign config = configblock[1] | sort: "method" %}

            {% for cfg in config %}

            {% assign key = cfg.path
                | append: cfg.method
                | remove: "["
                | remove: "]"
                | remove: '"'
                | remove: '/'
                | remove: '$'
                | remove: rbrace
                | remove: lbrace %}

            <h7 class="accordion-header" id="heading{{key}}">
                <button
                    {% if showClass contains "show" %}
                    class="accordion-button"
                    {% else %}
                    class="accordion-button collapsed"
                    {% endif %}
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapse{{key}}"
                    {% if showClass contains "show" %}aria-expanded="true" {% endif %}
                    style="height: 40px; padding-top: 30px; border-radius: 6px;"
                    aria-controls="collapse{{key}}">
                    <table style="border: none;">
                        <tr>
                            <td style="width: 6%; border-bottom:none;">
                                
                                {% if cfg.method == "DELETE" %}
                                <span class="badge bg-danger">
                                {% elsif cfg.method == "GET" %}
                                <span class="badge bg-primary">
                                {% elsif cfg.method == "POST" %}
                                <span class="badge bg-success">
                                {% else %}
                                <span class="badge bg-secondary">
                                {%endif %}

                                {% if cfg.casEndpoint.size > 0 %}
                                <i class="fas fa-copyright"></i>
                                {% else %}
                                <i class="fab fa-codepen"></i>
                                {% endif %}

                                {{ cfg.method }} </span>
                            </td>
                            <td style="border-bottom:none;"><span><code>/cas/actuator/{{ cfg.path }}</code></span></td>
                        </tr>
                    </table>
                </button>
            </h7>

            <div id="collapse{{key}}" class="accordion-collapse collapse {{ showClass }}"
                aria-labelledby="heading{{key}}"
                data-bs-parent="#{{ randomNumber }}">
                <div class="accordion-body">
                    <p class="small text-left">{{cfg.summary}}</p>

                    <table>
                        <tr>
                            {% if cfg.returnType.size > 0 %}
                            <td width="25%"><i data-bs-toggle="tooltip" data-bs-placment="top" 
                                data-bs-html="true" title="Return Type" 
                                class="fas fa-exchange-alt"></i> <code>{{cfg.returnType}}</code></td>
                            {% endif %}

                            {% if cfg.consumes.size > 0 %}
                            <td width="25%"> <i data-bs-toggle="tooltip" data-bs-placment="top" 
                                data-bs-html="true" title="Narrows the primary mapping by media types that can be consumed by the mapped handler. Consists of one or more media types one of which must match to the request <code>Content-Type</code> header." class="fas fa-sign-in-alt"></i> <code>{{cfg.consumes}}</code></td>
                            {% endif %}

                            {% if cfg.produces.size > 0 %}
                            <td width="25%"><i data-bs-toggle="tooltip" data-bs-placment="top" 
                                data-bs-html="true" title="Narrows the primary mapping by media types that can be produced by the mapped handler. Consists of one or more media types one of which must be chosen via content negotiation against the <i>acceptable</i> media types of the request. Typically those are extracted from the <code>Accept</code> header but may be derived from query parameters, or other." class="fas fa-sign-out-alt"></i> <code>{{cfg.produces}}</code></td>
                            {% endif %}

                            <td>
                            {% if cfg.casEndpoint.size > 0 %}
                                <img class="undecorated img-fluid" 
                                    width="42px" 
                                    src="../../images/cas-sm.png" 
                                    data-bs-toggle="tooltip" data-bs-placment="top" 
                                    data-bs-html="true" title="This endpoint is owned, provided and controlled by CAS." 
                                    class="fas fa-copyright"></i>
                            {% else %}
                                <i data-bs-toggle="tooltip" data-bs-placment="top" 
                                    data-bs-html="true" title="This endpoint is provided by a third-party framework to CAS." 
                                    class="fas fa-codepen"></i>
                            {% endif %}
                            </td>
                        
                            {% if cfg.deprecated.size > 0 %}
                                <td width="25%">
                                    <i data-bs-toggle="tooltip" data-bs-placment="top" 
                                    data-bs-html="true" title="This endpoint is deprecated and may be removed in future CAS releases."  
                                    class="fas fa-exclamation-circle"></i>
                                </td>
                            {% endif %}
                        </tr>

                        <tr>
                            <td width="85%"><i data-bs-toggle="tooltip" 
                                data-bs-placment="top" data-bs-html="true" title="Method Signature" 
                                class="fas fa-signature"></i> <code class="text-wrap text-break">{{cfg.signature}}</code></td>
                        </tr>
                    </table>
                </div>
            </div>

            {% assign showClass = "" %}
            {% endfor %}
        {% endfor %}
    {% endfor %}
</div>

<br/>